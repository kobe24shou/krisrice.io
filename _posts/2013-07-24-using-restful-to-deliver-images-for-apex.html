---
layout: post
title: Using RESTful to deliver Images for APEX
date: '2013-07-24T08:13:00.002-07:00'
author: Kris Rice
tags:
- ords
modified_time: '2015-07-14T08:47:52.502-07:00'
thumbnail: http://4.bp.blogspot.com/-BjQnLKEOeTw/Ue_owAuWpMI/AAAAAAAAAqI/ob0hTXj7SEw/s72-c/Screen+Shot+2013-07-24+at+10.45.38+AM.png
blogger_id: tag:blogger.com,1999:blog-37621059.post-5261334295913001899
blogger_orig_url: http://krisrice.blogspot.com/2013/07/using-restful-to-deliver-images-for-apex.html
---

&nbsp; &nbsp;Who doesn't want things to be faster. &nbsp;Here's a very easy way to get images in the database out faster. &nbsp;The normal way to get images embedded into and Application Express app is to use apex_util.get_blob. &nbsp;It's tried and test and optimized for doing just that so you may assume it doesn't get faster to get images served out. &nbsp;Here's a quick screenshot of loading a test page in chrome of 2 identical images and by identical, I mean the same BLOB from the same table with the same ID.<br /><br />The shorter timeline is the RESTful delivery. &nbsp;Mileage will of course vary by load and latency but with what I've tested REST delivery is always faster.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-BjQnLKEOeTw/Ue_owAuWpMI/AAAAAAAAAqI/ob0hTXj7SEw/s1600/Screen+Shot+2013-07-24+at+10.45.38+AM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="422" src="http://4.bp.blogspot.com/-BjQnLKEOeTw/Ue_owAuWpMI/AAAAAAAAAqI/ob0hTXj7SEw/s640/Screen+Shot+2013-07-24+at+10.45.38+AM.png" width="640" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">For 5 reloads this was the timings I got:</div><div class="separator" style="clear: both; text-align: left;"><br /></div><br /><pre class="brush: shell;">apex_util REST % Faster<br />  <br />259             137     89.05%<br />362             311     16.40%<br />250             129     93.80%<br />245             130     88.46%<br />269             126     113.49%<br />  <br /><br /></pre><br />Now introducing RESTful type of Media Resource which makes this very easy to do. &nbsp;Colm initially <a href="http://cdivilly.wordpress.com/2010/10/18/apex-listener-resource-templates/">blogged</a> about it a while back. &nbsp;In a nutshell, it's a query that wants 2 columns the first being the content type , mime, and the second being a lob or anything to be delivered. &nbsp;Colm showed how to deliver XML in his post. &nbsp;This is how to serve up images.<br /><br /><br />In the URI Template, you'll notice {id} which is the ID of the image to be served and used as a bind to query. &nbsp;The select is quite simple to follow.<br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-eaTMlVWcZcE/Ue_tLfMKGfI/AAAAAAAAAqY/UhRjSgo-GjM/s1600/Screen+Shot+2013-07-24+at+10.43.45+AM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="640" src="http://1.bp.blogspot.com/-eaTMlVWcZcE/Ue_tLfMKGfI/AAAAAAAAAqY/UhRjSgo-GjM/s640/Screen+Shot+2013-07-24+at+10.43.45+AM.png" width="366" /></a></div><br />The table for this example is quite simple but obviously could be anything as long as there's a mime and lob to deliver.<br /><br /><br /><pre class="brush: sql;">CREATE TABLE  myimages<br />   ( IMAGE_ID NUMBER NOT NULL ENABLE, <br /> IMAGE_BLOB BLOB NOT NULL ENABLE, <br /> IMAGE_MIMETYPE VARCHAR2(255)<br />   )<br />/<br /></pre>