---
layout: post
title: SQL Developer 3.1 and Obfuscation
date: '2012-02-08T14:47:00.000-08:00'
author: Kris Rice
tags: 
modified_time: '2012-02-08T14:47:03.980-08:00'
thumbnail: http://4.bp.blogspot.com/-J0eM7GbqbSM/TzL3-olTzuI/AAAAAAAAAfQ/uM1Bx3TSEY4/s72-c/step1.png
blogger_id: tag:blogger.com,1999:blog-37621059.post-4634258568439880307
blogger_orig_url: http://krisrice.blogspot.com/2012/02/sql-developer-31-and-obfuscation.html
---

<a href="http://www.oracle.com/technetwork/developer-tools/sql-developer/downloads/index.html">SQL Developer 3.1</a> , <a href="http://www.oracle.com/technetwork/developer-tools/datamodeler/downloads/index.html">SQL Developer Datamodeler 3.1</a>, and the <a href="http://www.oracle.com/technetwork/database/enterprise-edition/databaseappdev-vm-161299.html">OTN DB VM</a> were all released yesterday. &nbsp;Now it's time to blog about some of the new features included in these releases. &nbsp;Be sure to check out the various blogs the team has. &nbsp;There's a listing on OTN <a href="http://www.oracle.com/technetwork/developer-tools/sql-developer/community-089178.html">here</a>.<br /><br />First up from me is PL/SQL Obfuscation. &nbsp;The idea is to simply make the code unreadable. &nbsp;This is done in various language mostly for protection of the intelectual property. &nbsp;The website, http://perl.plover.com/obfuscated/ shows this examplefrom a contest that used to run for Perl.<br /><span class="Apple-style-span" style="background-color: white; font-family: monospace; white-space: pre;"><br /></span><br /><pre class="brush: perl">@P=split//,".URRUU\c8R";@d=split//,"\nrekcah xinU / lreP rehtona tsuJ";sub p{<br />@p{"r$p","u$p"}=(P,P);pipe"r$p","u$p";++$p;($q*=2)+=$f=!fork;map{$P=$P[$f^ord<br />($p{$_})&amp;6];$p{$_}=/ ^$P/ix?$P:close$_}keys%p}p;p;p;p;p;map{$p{$_}=~/^[P.]/&amp;&amp;<br />close$_}%p;wait until$?;map{/^r/&amp;&amp;&lt;$_&gt;}%p;$_=$d[$q];sleep rand(2)if/\S/;print<br /></pre><br />The PL/SQL one SQL Developer now has isn't to this extreme but does make the code quite difficult to read. &nbsp;If someone obfuscated and then wrapped the code, that would be 2 hurdles in the way to assist&nbsp;licensing&nbsp;and other agreements to protect the IP invested.<br /><div><br /></div><div><br /></div><div>Here's the steps to try it out.</div><div><br /></div><div>1) Open a PL/SQL Object. &nbsp;This is a package I have that mirror DBMS_OUTPUT but send to a pipe instead. &nbsp;It allows me to basically do a tail -f on my code's log messages and watch it as it processes. &nbsp;If anyone is interested in that I can write it up another time.</div><div><br /></div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-J0eM7GbqbSM/TzL3-olTzuI/AAAAAAAAAfQ/uM1Bx3TSEY4/s1600/step1.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-J0eM7GbqbSM/TzL3-olTzuI/AAAAAAAAAfQ/uM1Bx3TSEY4/s1600/step1.png" /></a></div><div><br /></div><div><br /></div><div>2) Right click and choose Obfuscate...</div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-90X4V6Eqcpk/TzL4HV1wUgI/AAAAAAAAAfY/3u1v43_A4Io/s1600/step2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-90X4V6Eqcpk/TzL4HV1wUgI/AAAAAAAAAfY/3u1v43_A4Io/s1600/step2.png" /></a></div><div><br /></div><div><br /></div><div>3) SQL Developer will prompt to save the non-obfuscated code so there is a readable copy.</div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-42Wo-i5jzwc/TzL4Zdl0RjI/AAAAAAAAAfg/OtnqBsFXoLw/s1600/Screen+Shot+2012-02-08+at+2.31.20+PM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-42Wo-i5jzwc/TzL4Zdl0RjI/AAAAAAAAAfg/OtnqBsFXoLw/s1600/Screen+Shot+2012-02-08+at+2.31.20+PM.png" /></a></div><div><br /></div><div><br /></div><div>4) Check out the sources. &nbsp;It can&nbsp;be undone by a determined person quite easy with a lot of search and replace but at least it puts a hurdle in the way.<br /><br /></div><div><pre class="brush: sql">create or replace<br />PACKAGE BODY pipe_output IS<br />PROCEDURE set_pipeoutput_on IS<br />-- Opens the communication pipe<br />BEGIN<br />   pv_pipe_on_bln := TRUE;<br />END set_pipeoutput_on;<br /><br />PROCEDURE put_line (p_pipe_name VARCHAR2,p_message_txt VARCHAR2) IS<br />-- Sends the username of the executing user and a message to the pipe<br />  "CpaX6WrU0YmLxF5r4E46dw==" PLS_INTEGER;<br /> "Y1QFM4yVoF5S9b7fNyG/YQ==" varchar2(4000);<br />BEGIN<br />    if ( pv_pipe_on_bln ) then<br />      "Y1QFM4yVoF5S9b7fNyG/YQ==" := to_char(systimestamp,'HH24:MI:SS.FF6') ||':'||p_message_txt;<br />      DBMS_PIPE.PACK_MESSAGE("Y1QFM4yVoF5S9b7fNyG/YQ==");<br />      "CpaX6WrU0YmLxF5r4E46dw==" := DBMS_PIPE.SEND_MESSAGE(p_pipe_name,0.0001);<br />    end if;<br />END put_line;<br /><br />PROCEDURE put_line (p_message_txt VARCHAR2) IS<br />-- Sends the username of the executing user and a message to the pipe<br />  "CpaX6WrU0YmLxF5r4E46dw==" PLS_INTEGER;<br />BEGIN<br />   IF (pv_pipe_on_bln) THEN<br />      DBMS_PIPE.PACK_MESSAGE(USER);<br />      DBMS_PIPE.PACK_MESSAGE(p_message_txt);<br />      "CpaX6WrU0YmLxF5r4E46dw==" := DBMS_PIPE.SEND_MESSAGE('OUTPUT');<br />   END IF;<br />END put_line;<br /><br />PROCEDURE get_line (p_waittime_num NUMBER := 1) IS<br />-- Monitors the pipe based on a specified wait time, reading and<br />-- displaying the username and messages as they are sent from the<br />-- executing process.<br />   "CpaX6WrU0YmLxF5r4E46dw=="            PLS_INTEGER;<br />   "cy5MsI3IbOrf1eySVcYcZQ=="          VARCHAR2(30);<br />   "9C7AbyOB7jrbTAPf3Xpm7w=="           VARCHAR2(2000);<br />   "=C7AbyOB7joas2oSfUfb6NF431LXcf" BOOLEAN := FALSE;<br />BEGIN<br />   LOOP<br />      "CpaX6WrU0YmLxF5r4E46dw==" := DBMS_PIPE.RECEIVE_MESSAGE('OUTPUT',<br />         p_waittime_num);<br />      EXIT WHEN ("CpaX6WrU0YmLxF5r4E46dw==" != 0);<br />      "=C7AbyOB7joas2oSfUfb6NF431LXcf" := TRUE;<br />      DBMS_PIPE.UNPACK_MESSAGE("cy5MsI3IbOrf1eySVcYcZQ==");<br />      DBMS_PIPE.UNPACK_MESSAGE("9C7AbyOB7jrbTAPf3Xpm7w==");<br />      DBMS_OUTPUT.PUT_LINE(RPAD('USER: '||"cy5MsI3IbOrf1eySVcYcZQ==",30)||<br />                           'MESSAGE: '||"9C7AbyOB7jrbTAPf3Xpm7w==");<br />   END LOOP;<br />   IF NOT "=C7AbyOB7joas2oSfUfb6NF431LXcf" THEN<br />      DBMS_OUTPUT.PUT_LINE('No output in pipe.');<br />   END IF;<br />END get_line;<br /><br />   PROCEDURE get_line (p_pipe_name VARCHAR2,p_waittime_num NUMBER := 1) IS<br />-- Monitors the pipe based on a specified wait time, reading and<br />-- displaying the username and messages as they are sent from the<br />-- executing process.<br />   "CpaX6WrU0YmLxF5r4E46dw=="            PLS_INTEGER;<br />   "cy5MsI3IbOrf1eySVcYcZQ=="          VARCHAR2(30);<br />   "9C7AbyOB7jrbTAPf3Xpm7w=="           VARCHAR2(2000);<br />   "=C7AbyOB7joas2oSfUfb6NF431LXcf" BOOLEAN := FALSE;<br />BEGIN<br />   LOOP<br />      "CpaX6WrU0YmLxF5r4E46dw==" := DBMS_PIPE.RECEIVE_MESSAGE(p_pipe_name,<br />         p_waittime_num);<br />      EXIT WHEN ("CpaX6WrU0YmLxF5r4E46dw==" != 0);<br />      "=C7AbyOB7joas2oSfUfb6NF431LXcf" := TRUE;<br />      DBMS_PIPE.UNPACK_MESSAGE("cy5MsI3IbOrf1eySVcYcZQ==");<br />      DBMS_PIPE.UNPACK_MESSAGE("9C7AbyOB7jrbTAPf3Xpm7w==");<br />      DBMS_OUTPUT.PUT_LINE('MESSAGE: '||"9C7AbyOB7jrbTAPf3Xpm7w==");<br />   END LOOP;<br />   IF NOT "=C7AbyOB7joas2oSfUfb6NF431LXcf" THEN<br />      DBMS_OUTPUT.PUT_LINE('No output in pipe.');<br />   END IF;<br />END get_line;<br />PROCEDURE get_line (p_pipe_name IN VARCHAR2,p_waittime_num IN NUMBER := 1,p_message OUT VARCHAR2)<br />IS<br />-- Monitors the pipe based on a specified wait time, reading and<br />-- displaying the username and messages as they are sent from the<br />-- executing process.<br />   "CpaX6WrU0YmLxF5r4E46dw=="            PLS_INTEGER;<br />   "9C7AbyOB7jrbTAPf3Xpm7w=="           VARCHAR2(2000);<br />BEGIN<br />   LOOP<br />     PUT_LINE('KLRICE','Recieving');<br />      "CpaX6WrU0YmLxF5r4E46dw==" := DBMS_PIPE.RECEIVE_MESSAGE(p_pipe_name, p_waittime_num);<br />      EXIT WHEN ("CpaX6WrU0YmLxF5r4E46dw==" != 0);<br />      PUT_LINE('KLRICE','got something');<br />      DBMS_PIPE.UNPACK_MESSAGE("9C7AbyOB7jrbTAPf3Xpm7w==");<br />      p_message :="9C7AbyOB7jrbTAPf3Xpm7w==";<br />   END LOOP;<br />END get_line;<br /><br /><br />END pipe_output;<br /></pre></div><div><br /></div>