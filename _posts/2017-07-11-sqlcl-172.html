---
layout: post
title: SQLcl 17.2
date: '2017-07-11T15:07:00.002-07:00'
author: Kris Rice
tags: 
modified_time: '2017-07-11T15:07:30.960-07:00'
thumbnail: https://4.bp.blogspot.com/-TJ41kSdawhA/WWVHU5Ol5aI/AAAAAAAABSE/8vtCQT1C2e8_GjgncBWG3puAl4jBRhrUgCK4BGAYYCw/s72-c/Screen%2BShot%2B2017-07-11%2Bat%2B5.21.50%2BPM.png
blogger_id: tag:blogger.com,1999:blog-37621059.post-2888030028879426051
blogger_orig_url: http://krisrice.blogspot.com/2017/07/sqlcl-172.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><h2 style="text-align: left;">New Versioning Scheme</h2><div>Starting with this release the numbering scheme is changed. &nbsp;All releases will now be the YEAR&lt;period&gt;Quarter&lt;period&gt;build numbers.</div><div><br /></div><div>So the new SQLcl is 17.2.0.184.0917. &nbsp;</div><div><br /></div><div>Breaking that down.&nbsp;</div><div><ul style="text-align: left;"><li>17 &nbsp; - Year</li><li>2 &nbsp; &nbsp; - Quarter</li><li>0 &nbsp; &nbsp; - &nbsp;Patch number</li><li>184 - Day in Julian</li><li>0917 - hour and minute the build was done.</li></ul></div><div><br /></div><div><a href="http://4.bp.blogspot.com/-TJ41kSdawhA/WWVHU5Ol5aI/AAAAAAAABSE/8vtCQT1C2e8_GjgncBWG3puAl4jBRhrUgCK4BGAYYCw/s1600/Screen%2BShot%2B2017-07-11%2Bat%2B5.21.50%2BPM.png" imageanchor="1"><img border="0" height="330" src="https://4.bp.blogspot.com/-TJ41kSdawhA/WWVHU5Ol5aI/AAAAAAAABSE/8vtCQT1C2e8_GjgncBWG3puAl4jBRhrUgCK4BGAYYCw/s640/Screen%2BShot%2B2017-07-11%2Bat%2B5.21.50%2BPM.png" width="640" /></a></div><h2 style="text-align: left;">New Features</h2><div>Securing Literals &nbsp;which was introduced here :&nbsp;<a href="http://krisrice.blogspot.com/2015/09/sqlcl-more-secure-now-with-rest.html">http://krisrice.blogspot.com/2015/09/sqlcl-more-secure-now-with-rest.html</a>&nbsp;so this is not new. &nbsp;What is new is controls over when it's done. &nbsp;It was set so that SQLcl did secure all literals for anything that was issued. Now there's a control for when/how deep to check.<br /><br />The default is any anonymous block less than 10 lines will be scrubbed automatically. &nbsp;This will catch the majority of uses. &nbsp;To ratchet up what is checked &nbsp;"set secureliterals ON" will secure every block completely. &nbsp;There is a performance impact to this if there are very large block such as in the APEX installation which has some blocks over 1k in size.<br /><br />The opposite is there also to disable this feature: set secureliterals OFF<br /><br /><br />Here's an example of what happens. The 'abcxyz' is removed and turned into a bind :SqlDevBind1ZInit1<br /><br /><br /></div><div><pre style="brush: sql;">SQL&gt; declare<br />  2    l_local varchar2(20);<br />  3  begin<br />  4    l_local := 'abcxyz';<br />  5    dbms_output.put_line(l_local || chr(10));<br />  6  end;<br />  7  /<br /><br />PL/SQL procedure successfully completed.<br /><br />SQL&gt; select sql_text from v$sql where sql_text like '%abcxyz%';<br />SQL_TEXT      <br />                                                                                                                                                                                                                                  <br />DECLARE </pre><pre style="brush: sql;">SqlDevBind1Z_1 VARCHAR2(32767):=:SqlDevBind1ZInit1;  </pre><pre style="brush: sql;">BEGIN </pre><pre style="brush: sql;">   declare   </pre><pre style="brush: sql;">       l_local varchar2(20); </pre><pre style="brush: sql;">   begin   </pre><pre style="brush: sql;">       l_local := 'abcxyz';   </pre><pre style="brush: sql;">       dbms_output.put_line(l_local || chr(TO_NUMBER( SqlDevBind1Z_1))); </pre><pre style="brush: sql;">   end;  </pre><pre style="brush: sql;"> :AUXSQLDBIND1:=SqlDevBind1Z_1;  </pre><pre style="brush: sql;">END;  <br /><br /></pre></div><div></div><h2 style="text-align: left;"><br /></h2><h2 style="text-align: left;"><br /></h2><h2 style="text-align: left;">New Performance</h2><div><br /></div><div>So I spent the better part of 2 week in the NetBeans profiler and the outcome is well worth the time. &nbsp;ALL these numbers are on my laptop so milage will vary. &nbsp;APEX is probably one of the largest / complicated set of sql / plsql scripts to install into a database so I used that as my baseline. The SQLcl version I started from took <b>19m27.352s</b> to install APEX. &nbsp;For comparison, I ran the same install with SQL*PLUS that took almost 10 full minutes less at <b>9m59.789s</b>. &nbsp;SOOOO clearly there was an issue here.</div><div><br /></div><div>The key thing is knowing WHAT your application should be doing and how it should be doing it. &nbsp;There were a number of things that SQLcl was being overly aggressive &nbsp;about such as securing literals &nbsp;which was introduced here <a href="http://krisrice.blogspot.com/2015/09/sqlcl-more-secure-now-with-rest.html">http://krisrice.blogspot.com/2015/09/sqlcl-more-secure-now-with-rest.html</a>&nbsp;Then there were calls that were repetitive and could simple be removed. &nbsp;Then the next boost was from being more lax on dbms_output. &nbsp;SQLcl was checking for things like DDL that clearly can't have output so no need to check.</div><div><br /></div><div>The end result is that turned secure literals off and it now takes on my machine <b><span style="font-size: large;">7m17.635s</span></b></div><div><br /></div><div><br /></div><div><div><br /></div></div><h2 style="text-align: left;"><br /></h2><style type="text/css">p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px 'Andale Mono'; color: #28fe14; background-color: #000000; background-color: rgba(0, 0, 0, 0.9)} span.s1 {font-variant-ligatures: no-common-ligatures} span.Apple-tab-span {white-space:pre} </style></div>