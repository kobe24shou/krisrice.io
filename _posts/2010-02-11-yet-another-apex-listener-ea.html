---
layout: post
title: Yet another APEX Listener EA
date: '2010-02-11T18:46:00.000-08:00'
author: Kris Rice
tags: 
modified_time: '2010-02-11T18:46:11.421-08:00'
thumbnail: http://1.bp.blogspot.com/_HTPuwjEAZfk/S3SrrnDo75I/AAAAAAAAAT4/5yiA0cgFytk/s72-c/xls2collection.PNG
blogger_id: tag:blogger.com,1999:blog-37621059.post-1752396411700555209
blogger_orig_url: http://krisrice.blogspot.com/2010/02/yet-another-apex-listener-ea.html
---

We just pushed the <a href="http://www.oracle.com/technology/products/database/application_express/html/apex_listener_download.html">next EA</a> for the Application Express Listener. There's a few base bugs fixes in this like the file upload issue people on the forums posted about. The other significant bug fixed is when there's multiple listeners in one webserver. The listener will now check the following location in this order for a config file.<br /><br />1)&nbsp; $HOME/[MOUNT POINT]/apex-config.xml<br />2)&nbsp; ${config.dir}/[MOUNT POINT]/apex-config.xml ( from web.xml )<br />3)&nbsp; ${java.io.tmpdir}/[MOUNT POINT]/apex-config.xml&nbsp; (default for new installs )<br />4)&nbsp; $HOME/apex-config.xml<br />5)&nbsp; ${config.dir}/apex-config.xml ( from web.xml )<br />6)&nbsp; ${java.io.tmpdir}/APEX/apex-config.xml&nbsp; (default for new installs )<br /><br />Now for some new things.<br /><br />1)&nbsp;&nbsp; &nbsp;A new /listenerAdmin which gives realtime stats.&nbsp; It's a long ways from the end look of the page but it give stats.&nbsp; This is protected by a role named "listenerAdmin".&nbsp; Users and roles are setup in the webserver. To setup this role in tomcat, edit the conf/tomcat-users.xml and add something like this:<br /><br />&lt;tomcat-users&gt;<br />&lt;role rolename="listenerAdmin"&gt;&lt;/role&gt;&lt;/pre&gt;<br />&lt;user password="klrice" roles="listenerAdmin" username="klrice"&gt;&lt;/user&gt;<br />&lt;/tomcat-users&gt;<br /><br />Here's an example from the tryapexnow.com site:<br /><br />Current Time: Thu Feb 11 20:08:40 EST 2010<br />Server uptime: 50 Days 07:16:23.966<br />Total accesses: 1449806.0<br />Total Traffic: 21.85G<br />Total File Downloads: 86029<br />Total Errors: 3678<br />Total Processing Time: 10 Days 21:07:36.838<br /><br /><br />2) There's now a mechanism to log the full db requests.&nbsp; This is a step towards having the requests repayable in the Unit Tester.<br />To begin with this here's the 2 lines needed in the apex-config.xml <br /><br />&nbsp;&lt;entry key="apex.log.enable"&gt;false&lt;/entry&gt;<br />&nbsp;&lt;entry key="apex.log.procedure"&gt;log_proc&lt;/entry&gt;<br /><br />A sample of the required signature is in the WEB-XML/sample_capture.sql <br /><br /><br />3) The listener can now take a *.xls file that is uploaded and convert it into a collection. Here's the steps to try this out.<br />a)&nbsp; This needs to be turned on in the apex-config.xml<br />&lt;entry key="apex.excel2collection"&gt;true&lt;/entry&gt;<br /><br />b) The file upload page must have a request of xls2collection.<br /><br />You should get a collection of the name of the item and the C001 is the name of the sheet in the xls file.&nbsp; Here's an example.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_HTPuwjEAZfk/S3SrrnDo75I/AAAAAAAAAT4/5yiA0cgFytk/s1600-h/xls2collection.PNG" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="136" src="http://1.bp.blogspot.com/_HTPuwjEAZfk/S3SrrnDo75I/AAAAAAAAAT4/5yiA0cgFytk/s400/xls2collection.PNG" width="400" /></a></div>