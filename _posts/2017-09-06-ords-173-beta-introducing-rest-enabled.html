---
layout: post
title: ORDS 17.3 Beta - Introducing REST enabled SQL
date: '2017-09-06T14:49:00.000-07:00'
author: Kris Rice
tags: 
modified_time: '2017-09-06T14:49:00.127-07:00'
thumbnail: https://2.bp.blogspot.com/-uLov2PXWXHk/WbBn3oPxjvI/AAAAAAAABTU/e-Qt1OpJOGw4tIN34QRpvXDt9LSTyHbfACK4BGAYYCw/s72-c/Screen%2BShot%2B2017-09-06%2Bat%2B5.24.59%2BPM.png
blogger_id: tag:blogger.com,1999:blog-37621059.post-2793467883171626619
blogger_orig_url: http://krisrice.blogspot.com/2017/09/ords-173-beta-introducing-rest-enabled.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" style="text-align: left;" trbidi="on"><h2 style="text-align: left;">Download</h2><div>Got get it on the normal ORDS download page</div><div><a href="http://www.oracle.com/technetwork/developer-tools/rest-data-services/downloads/index.html">http://www.oracle.com/technetwork/developer-tools/rest-data-services/downloads/index.html</a></div><h2 style="text-align: left;">Versioning&nbsp;</h2><br />First and most obvious is ORDS is now on the same versioning scheme as SQL Developer, SQLcl and Oracle Cloud. &nbsp;That is &lt;year&gt;.&lt;quarter&gt;.&lt;patch&gt; and the same tail we've always had which is &lt;julian day&gt;.&lt;HH24&gt;.&lt;MI&gt;. &nbsp;That makes this beta <span style="font-size: large;">ords.17.3.0.248.08.45.zip</span>&nbsp;On to the features.<br /><br /><br /><h2 style="text-align: left;">REST Enabled SQL</h2><br />Once again the core sql engine from SQL Developer that was wrapped into the command line &nbsp;SQLcl has been used for another feature. This same library is now used in many places in Oracle including the install of Grid Infra for anyone running RAC databases to the Developer Cloud Service to add Hudson build options for database deployments.<br /><br />The new feature we are naming REST enabled SQL which in reality is more of REST enabled SQLcl. The feature is OFF by default and can be activated with the following line added to the defaults.xml file.<br /><br /><pre style="brush: xml;">&lt;entry key="restEnabledSql.active"&gt;true&lt;/entry&gt;<br /></pre><br /></div><br />Once that option is enabled, there is a now an endpoint enabled for EVERY REST enabled schema such as&nbsp;http://localhost:9090/ords/klrice/_/sql . This endpoint is a POST only and can be authenticated to in 2 manners. <br /><br /><ol style="text-align: left;"><li>Web Server level authenticated user with "SQL Developer" role will be able to access any REST enabled schema. &nbsp;Yes, that means any REST enabled schema so ensure to use this properly.</li><li>DB Authentication. This method will as implies only be allowed to access the same DB Schema it is authenticated to. So HR can access &nbsp;http://localhost:9090/ords/hr/_/sql&nbsp; only.</li></ol><br /><br />Then it's as simple as calling the REST point, authenticating and tossing any amount of sql at it. Either a singular sql statement or an entire scripts.<br /><br /><br /><pre style="brush: shell;">$ curl -X "POST" "http://localhost:9090/ords/hr/_/sql"  \<br />       -H "Content-Type: application/sql"               \<br />       -u HR:oracle                                     \<br />   -d $'<b><span style="font-size: large;">select count(1) abc from user_objects;select * from dual;</span></b>' <br /><br /><br />{<br />    "env": {<br />        "defaultTimeZone": "America/New_York"<br />    },<br />    "items": [<br />        {<br />            "response": [],<br />            "result": 0,<br />            "resultSet": {<br />                "count": 1,<br />                "hasMore": false,<br />                "items": [<br />                    {<br />                        "abc": 35<br />                    }<br />                ],<br />                "limit": 1500,<br />                "metadata": [<br />                    {<br />                        "columnName": "ABC",<br />                        "columnTypeName": "NUMBER",<br />                        "isNullable": 1,<br />                        "jsonColumnName": "abc",<br />                        "precision": 0,<br />                        "scale": -127<br />                    }<br />                ],<br />                "offset": 0<br />            },<br />            "statementId": 1,<br />            "statementPos": {<br />                "endLine": 1,<br />                "startLine": 1<br />            },<br />            "statementText": "select count(1) abc from user_objects",<br />            "statementType": "query"<br />        },<br />        {<br />            "response": [],<br />            "result": 0,<br />            "resultSet": {<br />                "count": 1,<br />                "hasMore": false,<br />                "items": [<br />                    {<br />                        "dummy": "X"<br />                    }<br />                ],<br />                "limit": 1500,<br />                "metadata": [<br />                    {<br />                        "columnName": "DUMMY",<br />                        "columnTypeName": "VARCHAR2",<br />                        "isNullable": 1,<br />                        "jsonColumnName": "dummy",<br />                        "precision": 1,<br />                        "scale": 0<br />                    }<br />                ],<br />                "offset": 0<br />            },<br />            "statementId": 2,<br />            "statementPos": {<br />                "endLine": 3,<br />                "startLine": 3<br />            },<br />            "statementText": "select * from dual",<br />            "statementType": "query"<br />        }<br />    ]<br />}<br /><br /></pre><br /><br /><br /><h3 style="text-align: left;">The fine print.</h3><div><h4 style="text-align: left;">Supported Commands</h4><br />There's a number of things in this SQLcl library that are disabled as they touch the host operating systems or reach out to the network. Appendix D of the ORD Documentation lists these but to give a flavor for what they are things like</div><div><ul style="text-align: left;"><li>host</li><li>spool</li><li>@, @@, start</li><li>connect</li><li>cd</li><li>....</li></ul><div>Basically, if the command can touch/read/write the file system in any way, nope. If the command can reach out over the network, nope.</div></div><div><br /><h4 style="text-align: left;">Number of Rows returns</h4></div><div>Also the number of rows returnable is governed by a flag in defaults.xml to prevent a runaway query. Exporting a bazillion rows is not a use for this feature.&nbsp;</div><div><pre style="brush: xml;">&lt;entry key="jdbc.maxRows"&gt;1500&lt;/entry&gt;<br /></pre><br /><br /></div><div><br /></div><div><h2 style="text-align: left;">Coming Next...</h2></div><div>This feature not only supports a 'plain' sql script but there's a JSON language to sending more robust requests. This is a short example that shows some of the powerful features sending in a select with an offset, a limit, bind variables and a &nbsp;SCN number.</div><div><br /></div><div><a href="http://2.bp.blogspot.com/-uLov2PXWXHk/WbBn3oPxjvI/AAAAAAAABTU/e-Qt1OpJOGw4tIN34QRpvXDt9LSTyHbfACK4BGAYYCw/s1600/Screen%2BShot%2B2017-09-06%2Bat%2B5.24.59%2BPM.png" imageanchor="1"><img border="0" height="426" src="https://2.bp.blogspot.com/-uLov2PXWXHk/WbBn3oPxjvI/AAAAAAAABTU/e-Qt1OpJOGw4tIN34QRpvXDt9LSTyHbfACK4BGAYYCw/s640/Screen%2BShot%2B2017-09-06%2Bat%2B5.24.59%2BPM.png" width="640" /></a></div><div><br /></div><div><br /></div><div><br /></div><br /><br /></div>