---
layout: post
title: PL/SQL Unit testing in the builds
date: '2011-03-16T16:28:00.000-07:00'
author: Kris Rice
tags: 
modified_time: '2011-03-16T16:28:02.725-07:00'
blogger_id: tag:blogger.com,1999:blog-37621059.post-4731614574006509647
blogger_orig_url: http://krisrice.blogspot.com/2011/03/plsql-unit-testing-in-builds.html
---

At the OTN Dev Day in Dallas last week, I asked how many people unit tested PL/SQL. &nbsp;The response was a kind of group chuckle&nbsp;acknowledging it should be done but isn't being done. &nbsp;This was not really surprising since it's the same&nbsp;response&nbsp;I get everywhere I ask. &nbsp;The difference is that in this event the attendees did a hands on lab and made tests. &nbsp;The exact same lab that is in the&nbsp;<a href="http://apex.oracle.com/pls/apex/f?p=44785:24:4145537630591258:::24:P24_CONTENT_ID,P24_PREV_PAGE:5236,24">Oracle Learning Library</a>. &nbsp;After doing the lab people realized how easy it actually is to test their PL/SQL.<br /><br />Now what's not in the lab is how to schedule them for an automated nightly run or as a part of a system build out. &nbsp;For that, there is a command line to kick off a test. &nbsp;In the sqldeveloper/bin, there's a ututil.sh and ututil.bat. &nbsp;Simply run these and you get the syntax.<br /><br /><pre>sqldeveloper/bin$ ./ututil.sh <br /><br />Oracle SQL Developer<br /> Copyright (c) 1997, 2011, Oracle and/or its affiliates. All rights reserved. <br /><br />ututil -run ?<br />ututil -exp ?<br />ututil -imp ?<br /><br /></pre>There's 3 choices.  Export a test to an xml file, Import the test from the xml file, and Run the test. I'll focus on the run option.  <br /><br /><pre>./ututil.sh -run -?<br /><br />Oracle SQL Developer<br /> Copyright (c) 1997, 2011, Oracle and/or its affiliates. All rights reserved. <br /><br />ututil -run -test (-id &lt;id&gt;|-name &lt;name&gt;} -repo &lt;connection name&gt;<br />  -db &lt;connection name&gt;<br />ututil -run -suite (-id &lt;id&gt;|-name &lt;name&gt;} -repo &lt;connection name&gt;<br />  -db &lt;connection name&gt; <br /><br /></pre>&nbsp;Since there's a command line, it can be integrated into existing build&nbsp;procedures&nbsp;very quickly. &nbsp;There's a few switches needed to run the test or suite of tests. <br /><br />First, the obvious one is of course the test or suite of tests.<br /><br />Second, the what repository to connect to for the tests. &nbsp;All tests are stored in a central repository. &nbsp;This allows &nbsp;developers or QA or any group to create and manage the tests in a central place. &nbsp;The repository is also where all results are stored. <br /><br />Third, what database to target for the running of the tests. &nbsp;With all the tests in a central repository, they can be run against any database. &nbsp;This allows the tests to run with ZERO setup on any targeted database. &nbsp;All you need is a login and the testing can begin. &nbsp;The results are also stored in the central repository, test runs against various systems can be compared. &nbsp;Which&nbsp;makes it very easy to see what tests work on which systems and not on others. &nbsp;This is useful for the cases where some development code works properly yet when deployed to an&nbsp;integration&nbsp;environment&nbsp;it does not. &nbsp;The central repository can also make it easy to compare timings of the test runs. &nbsp;For example, something I've heard many times is on a development system with limited data code runs very fast yet when deployed against a larger dataset it is less than&nbsp;desirable&nbsp;speeds.<br /><br /><div><br /></div><br />