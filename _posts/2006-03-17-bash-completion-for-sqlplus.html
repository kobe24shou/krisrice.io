---
layout: post
title: Bash completion for Sql*Plus
date: '2006-03-17T15:08:00.000-08:00'
author: Kris Rice
tags: 
modified_time: '2006-11-15T15:33:11.579-08:00'
blogger_id: tag:blogger.com,1999:blog-37621059.post-116363295519010795
blogger_orig_url: http://krisrice.blogspot.com/2006/03/bash-completion-for-sqlplus.html
---

   If most people are like me,  you don't like to type something twice.  Here's something I wrote a while back to add completion to sqlplus in bash.  I had copied it to a new machine to and thought I'd post it in case someone might find it usefull so here it is.<br /><br /><br />  This file will check the ~/.bash_history for previous sqlplus commands as well as complete @.../foo.sql  <br /><br />To try this grab this and drop it into  the ~/.bashrc or ~/.bash_profile.   If <a href="http://freshmeat.net/projects/bashcompletion/"> Bash Completion</a> is loaded, it can be dropped into  /etc/bash_completion.d/ .<br /><br /><br />------FILE-------<br />_sqlplus()<br />{<br />  local cur<br />  COMPREPLY=()<br />  cur=${COMP_WORDS[COMP_CWORD]}<br />  prev=${COMP_WORDS[COMP_CWORD-1]}<br /><br />  if [ $COMP_CWORD -eq 1 ] &#38;& [[ "$cur" == -* ]]; then<br />    # return a list of switched<br />     COMPREPLY=( $( compgen -W '-H -V -C -L -M -R -S' -- $cur ) )<br />  elif  [[ "$cur" == "/"  ]]; then<br />    # only /nolog is possible<br />     COMPREPLY=( $( compgen -W '/nolog' -- $cur ) )<br />  elif  [[ "$prev" == "as"  ]]; then<br />    # as sysdba sysoper<br />     COMPREPLY=( $( compgen -W 'sysdba sysoper' -- $cur ) )<br />  elif  [[ "$prev" == "-R"  ]]; then<br />    # added for completness<br />     COMPREPLY=( $( compgen -W '1 2 3' -- $cur ) )<br />  elif  [[ "$cur" =~ "@" ]]; then<br />    # if @<tab><br />     base=${cur:1}<br />     COMPREPLY=( ${COMPREPLY[@]:-} $( compgen -f -P "@" -X "$xspec" -- "$base" )              $( compgen -d -P "@"  -- "$base" ) )<br />  elif  [[ "$prev" =~ "@" ]]; then<br />    # if @<space><tab><br />     COMPREPLY=( ${COMPREPLY[@]:-} $( compgen -f -P "@" -X "$xspec" -- "$cur" )              $( compgen -d -P "@"  -- "$cur" ) )<br />  elif [[ "$*" =~ "/" ]] ;then<br />    # already has a / assume it's the pass<br />    COMPREPLY=<br />  else<br />   #default<br />    _history<br />  fi<br />}<br />complete -F _sqlplus $nospace $filenames sqlplus<br /><br /><br />_history()<br />{<br />  local cur<br />  cur=${COMP_WORDS[COMP_CWORD]}<br />  COMPREPLY=( $( compgen -W '$( command grep "^sqlplus" ~/.bash_history ) ' -- $cur ) )<br />}<br />------FILE-------<br /><br />If you notice the history funcion is pretty simple so modifying it to check other files would be very easy