---
layout: post
title: XML Based right click menus
date: '2006-05-05T16:15:00.000-07:00'
author: Kris Rice
tags:
- Extensions
modified_time: '2006-11-15T15:33:11.813-08:00'
blogger_id: tag:blogger.com,1999:blog-37621059.post-116363330728939540
blogger_orig_url: http://krisrice.blogspot.com/2006/05/xml-based-right-click-menus.html
---

See what I <a href="http://www.thedailywtf.com/forums/67948/ShowPost.aspx">miss by going on vacation</a>. I just happen to be looking at old blogs and ran across this one.    So this one will explain how to add to the right click menu using nothing but xml.  Hopefully most of the xml is obvious. As an example, I'll use the right for table to change logging vs. nologging.<br /><br /><br /><pre><br />&lt;items&gt;<br />&lt;item type="TABLE"&gt;<br />   	&lt;title&gt;Logging&lt;/title&gt;<br />  	&lt;prompt&gt;<br />	      &lt;label&gt;Logging:&lt;/label&gt;	      &lt;value&gt;&lt;![CDATA[STATIC:LOGGING:NOLOGGING]]&gt;&lt;/value&gt;<br />	      &lt;default&gt;&lt;![CDATA[select logging from all_tables where owner = :OBJECT_OWNER and table_name = :OBJECT_NAME]]&gt;&lt;/default&gt;<br />  	&lt;/prompt&gt;  	<br />  	&lt;prompt type="confirm"&gt;<br />	       &lt;label&gt;Change logging status of selected table?&lt;/label&gt;<br />  	&lt;/prompt&gt;  	<br />  	&lt;sql&gt;&lt;![CDATA[alter table "#OBJECT_OWNER#"."#OBJECT_NAME#" #0#]]&gt;&lt;/sql&gt;<br />  	&lt;help&gt;Change the logging status of a table.  LOGGING will log changes to the redo log file.&lt;br/&gt;<br />  NOLOGGING will not log changes to the redo log file.&lt;/help&gt;<br />  	&lt;confirmation&gt;<br />  	       &lt;title&gt;Confirmation&lt;/title&gt;<br />  	       &lt;prompt&gt;Table "#OBJECT_NAME#" set to #0#&lt;/prompt&gt;<br />                &lt;/confirmation&gt;<br />  &lt;/item&gt;<br />  &lt;/items&gt;<br /></pre><br />  <br />While there's a lot more xml, hopefully the simplicity of this is not lost.  Here's what it looks like in the tool:<br /><br /><img src="http://www.orablogs.com/krice/logging.png"><br /><br />Hopefully most of the xml is obvious.  Here's a break down of the tags:<br /><br />Prompts:   <br />prompt    - This is a prompt for user input.  The user's input can be referenced when submitted as #0# for direct substituition.<br />  label     -  This is the label of the prompt<br />  value    -  This has a few choices.  <br />               -  If omitted , the user will be presented a text field for free-form input<br />               -  To have a static list of values STATIC:A:B:B<br />               -  To have a select base list  &lt;value&gt;&lt;![CDATA[select  :OBJECT_OWNER from dual ]]&gt;&lt;/value&gt;  ( more on binds later ) <br />default    -  This can be a single value or if a select SQL Developer will grab the first column of the first row <br /><br />The next prompt is a confirm, a prompt of this type is just text to the user.  There is no input.<br /><br />Now for the actual code to be executed against the DB.  The contents of the sql tag will have #0# ... #N# replaced with the values from the user prompts.  Also available are:<br />#OBJECT_NAME#      - name of the object <br />#OBJECT_TYPE#       - type of the object<br />#OBJECT_OWNER#   - owner of the object<br />#COLUMN_NAME#     - name of the column ( if a column was right clicked<br />#OBJECT_ID#             - object_id from all_objects<br />#USER#                       - user which is connected to the database<br /><br />The rest should be easy if your eyes have not glazed over by now the rest should be easy.  The help is just what is shown when the help button is clicked.<br />The confirmation is what is presented to the user once the sql has been executed successfully.<br /><br />Finally pass the command like -Draptor.user.contextmenu=/path/to/file:/path/to/file2<br /><br />Now that you've made it this far.  You can see how the values entered by the user are passed to the sql to be executed.  This mean the code in the sql block has to handle all the inputs and deal with them.  If you really want to see this, check out the code generated by Table->Column->Normalize.  <br /><br /><br />----- Updated 5/9------<br />I should have said to pass the new menus, these are the choices<br />sqldeveloper -J-Draptor.user.contextmenu=/path/to/file:/path/to/file2<br />or edit sqldeveloper.conf <br />AddVMOption -Draptor.user.contextmenu=/path/to/file:/path/to/file2