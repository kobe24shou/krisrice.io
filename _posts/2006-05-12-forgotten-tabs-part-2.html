---
layout: post
title: Forgotten tabs part 2
date: '2006-05-12T16:15:00.000-07:00'
author: Kris Rice
tags:
- Extensions
modified_time: '2006-11-15T15:33:11.892-08:00'
blogger_id: tag:blogger.com,1999:blog-37621059.post-116363331703194478
blogger_orig_url: http://krisrice.blogspot.com/2006/05/forgotten-tabs-part-2.html
---

<br />Now that's I know there's some interest in people writing,  I'll expand on my <a href="http://www.orablogs.com/krice/archives/001738.html">previous post</a> and show how to have shared queries, master/detail , 2 queries and the bottom query being text.<br /><br /><br /><p>When there's sql which has to used on multiple object types like tables and view, the sql can be defined once and shared to simplify the xml file.<br /><br /><pre><br />&lt;item type="sharedQuery" id="grants"&gt;<br />	    &lt;query&gt;<br />	       &lt;sql&gt;&lt;![CDATA[Select PRIVILEGE, GRANTEE, GRANTABLE, GRANTOR, COLUMN_NAME object_name from all_col_privs where table_schema = :OBJECT_OWNER and TABLE_NAME =  :OBJECT_NAME union all Select PRIVILEGE, GRANTEE, GRANTABLE, GRANTOR, table_NAME object_name from all_tab_privs where table_schema = :OBJECT_OWNER and TABLE_NAME = :OBJECT_NAME]]&gt;&lt;/sql&gt;<br />        &lt;/query&gt;<br />  &lt;/item&gt;<br /></pre><br /><br /><p>Since this item's type is sharedQuery it's now available to be used.  This is very easily done as such<br /><pre><br /> &lt;item type="editor" node="TableNode"&gt;<br />    &lt;title&gt;&lt;![CDATA[Grants]]&gt;&lt;/title&gt;<br />	    &lt;query id="grants" /&gt;<br /> &lt;/item&gt;<br /></pre><br /><br /><p>From here out I'll just use sharedQueries so the xml is easier to read but anywhere there's a query tag it can be a tag that includes the sql.<br /><br /><p>So now you say you need 2 independent grid of data for a given node. This is easy as well.<br /><pre><br /> &lt;item type="editor" node="TableNode"&gt;<br />   &lt;title>Dependencies&lt;/title&gt;<br />	&lt;query id="grants" /&gt;<br />	&lt;bottomquery&gt;<br />	    &lt;title>References&lt;/title&gt;<br />		&lt;query id="someothersql" /&gt;<br />	&lt;/bottomquery>  &gt;<br /> &lt;/item&gt;<br /></pre><br /><br /><p>Ok now 2 grid of stuff is good but now you want master detail.  This will re-run the bottom code with the row which is double clicked on in the top grid ( master ). The thing to notice in the following examples is the use of bind variables.  The subquery can reference and column in the master as a bind. In this first example there's a column names TABLE_NAME in the first sql statement.  The second sql has :TABLE_NAME.<br /><br /><br /><pre><br />  &lt;item type="editor" node="MViewNode"&gt;<br />    &lt;title&gt;&lt;![CDATA[Indexes]]&gt;&lt;/title&gt;<br />	      <sql><![CDATA[  select * from sys.all_indexes where owner = :OBJECT_OWNER and   index_name = :OBJECT_NAME]]></sql><br />        &lt;subquery&gt;<br />           &lt;query&gt;<br />	        &lt;sql&gt;&lt;![CDATA[ SELECT :TABLE_NAME FROM SYS.DUAL]]&gt;&lt;/sql&gt;<br />          &lt;/query&gt;<br />        &lt;/subquery&gt;<br /> &lt;/item&gt;<br /></pre><br /><br /><br /><p>Lastly, master detail again but the detail is text like the triggers tab on table.  The only difference here is that the subquery has a type of "code".  This keys SQL Developer to get the first column of the resulting sql statement and dump it into a text area.<br /><pre><br />&lt;item type="editor" node="TableNode"&gt;<br />    &lt;title&gt;&lt;![CDATA[Triggers]]&gt;&lt;/title&gt; <br />	    &lt;query id="triggerSql" /&gt;<br />        &lt;subquery type="code"&gt;<br />	      &lt;query&gt;<br />	        &lt;sql&gt;&lt;![CDATA[ SELECT DBMS_METADATA.GET_DDL('TRIGGER',:TRIGGER_NAME,:OBJECT_OWNER) SQL FROM SYS.DUAL]]&gt;&lt;/sql&gt;<br />          &lt;/query&gt;<br />        &lt;/subquery&gt;<br /> &lt;/item&gt;<br /></pre>