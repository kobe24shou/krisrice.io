---
layout: post
title: Who's on first? Adding Who columns in the Modeler
date: '2013-07-29T09:23:00.001-07:00'
author: Kris Rice
tags: 
modified_time: '2013-07-29T09:45:40.859-07:00'
thumbnail: http://2.bp.blogspot.com/-MXl9-fva8so/UfaThKvD4MI/AAAAAAAAAt8/7LaOU6tyAOc/s72-c/Screen+Shot+2013-07-29+at+12.07.47+PM.png
blogger_id: tag:blogger.com,1999:blog-37621059.post-4066578753714190494
blogger_orig_url: http://krisrice.blogspot.com/2013/07/whos-on-first-adding-who-columns-in.html
---

<div class="separator" style="clear: both; text-align: left;"><span style="font-size: large;">&nbsp; &nbsp;The SQL Developer Datamodeler has some great built in <a href="http://krisrice.blogspot.com/2010/12/modeler-custom-transformations.html">transformation</a>. &nbsp;Let's take a look at the Table Template one.</span></div><div class="separator" style="clear: both; text-align: left;"><span style="font-size: large;">&nbsp;&nbsp;</span></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-MXl9-fva8so/UfaThKvD4MI/AAAAAAAAAt8/7LaOU6tyAOc/s1600/Screen+Shot+2013-07-29+at+12.07.47+PM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><span style="font-size: large;"><img border="0" height="168" src="http://2.bp.blogspot.com/-MXl9-fva8so/UfaThKvD4MI/AAAAAAAAAt8/7LaOU6tyAOc/s640/Screen+Shot+2013-07-29+at+12.07.47+PM.png" width="640" /></span></a></div><div class="separator" style="clear: both; text-align: center;"><span style="font-size: large;"><br /></span></div><div class="separator" style="clear: both; text-align: left;"><span style="font-size: large;"><br /></span></div><div class="separator" style="clear: both; text-align: left;"><span style="font-size: large;">&nbsp; I'm going to start with the plain ol' HR schema and we're going to add in the standard who columns to it.</span></div><div class="separator" style="clear: both; text-align: left;"><span style="font-size: large;"><br /></span></div><div class="separator" style="clear: both; text-align: center;"><span style="font-size: large;"><br /></span></div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-uNmmWuHWOxI/UfaRPP4Gd7I/AAAAAAAAAtA/jNRepYDUjBs/s1600/Screen+Shot+2013-07-29+at+11.44.28+AM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><span style="font-size: large;"><img border="0" height="596" src="http://4.bp.blogspot.com/-uNmmWuHWOxI/UfaRPP4Gd7I/AAAAAAAAAtA/jNRepYDUjBs/s640/Screen+Shot+2013-07-29+at+11.44.28+AM.png" width="640" /></span></a></div><span style="font-size: large;"><br /></span> <br /><div class="separator" style="clear: both; text-align: center;"><span style="font-size: large;"><br /></span></div><div class="separator" style="clear: both; text-align: left;"><span style="font-size: large;">Step 1 is to create a table named "table_template" &nbsp;There's plenty of options since it's just a normal table in the model. &nbsp;The two interesting checkboxes which are Engineer and Generate in DDL. &nbsp;This will make it so this table is not generated when you ask for the DDL or Engineer into a Logical Model.</span></div><span style="font-size: large;"><br /></span> <br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-ywTnMlaYlpY/UfaRO8k2B5I/AAAAAAAAAtk/wln98b-qiFY/s1600/Screen+Shot+2013-07-29+at+11.45.22+AM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><span style="font-size: large;"><img border="0" height="640" src="http://1.bp.blogspot.com/-ywTnMlaYlpY/UfaRO8k2B5I/AAAAAAAAAtk/wln98b-qiFY/s640/Screen+Shot+2013-07-29+at+11.45.22+AM.png" width="561" /></span></a></div><span style="font-size: large;"><br /></span> <span style="font-size: large;"><br />Step 2 is to add in the who columns we want to propagate to all tables in the model.</span><br /><span style="font-size: large;"><br /></span><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-GNElBUOIAcE/UfaRPRpjwvI/AAAAAAAAAtI/-f_QNyNoyRY/s1600/Screen+Shot+2013-07-29+at+11.46.26+AM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><span style="font-size: large;"><img border="0" src="http://2.bp.blogspot.com/-GNElBUOIAcE/UfaRPRpjwvI/AAAAAAAAAtI/-f_QNyNoyRY/s1600/Screen+Shot+2013-07-29+at+11.46.26+AM.png" /></span></a></div><div class="separator" style="clear: both; text-align: center;"><span style="font-size: large;"><br /></span></div><div class="separator" style="clear: both; text-align: left;"><span style="font-size: large;">Step 3 is to do the transformation. &nbsp;</span></div><span style="font-size: large;"><br /></span> <br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-__ZMmhnoOgI/UfaRPTkSBQI/AAAAAAAAAtQ/odPf_CChXLo/s1600/Screen+Shot+2013-07-29+at+11.47.04+AM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><span style="font-size: large;"><img border="0" height="496" src="http://4.bp.blogspot.com/-__ZMmhnoOgI/UfaRPTkSBQI/AAAAAAAAAtQ/odPf_CChXLo/s640/Screen+Shot+2013-07-29+at+11.47.04+AM.png" width="640" /></span></a></div><span style="font-size: large;"><br /></span> <span style="font-size: large;"><br />Step 4 is to press the Apply button.</span><br /><span style="font-size: large;"><br /></span><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-FS8Z0XT5asQ/UfaRPrcnLbI/AAAAAAAAAtY/zrC1JsHHAnQ/s1600/Screen+Shot+2013-07-29+at+11.47.26+AM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><span style="font-size: large;"><img border="0" height="456" src="http://1.bp.blogspot.com/-FS8Z0XT5asQ/UfaRPrcnLbI/AAAAAAAAAtY/zrC1JsHHAnQ/s640/Screen+Shot+2013-07-29+at+11.47.26+AM.png" width="640" /></span></a></div><div class="separator" style="clear: both; text-align: center;"><span style="font-size: large;"><br /></span></div><div class="separator" style="clear: both; text-align: center;"><span style="font-size: large;"><br /></span></div><div class="separator" style="clear: both; text-align: left;"><span style="font-size: large;">The final result is that all the tables in the model now have every column from the table_template.</span></div><div class="separator" style="clear: both; text-align: left;"><span style="font-size: large;"><br /></span></div><span style="font-size: large;"><br /></span> <br /><div class="separator" style="clear: both; text-align: center;"><span style="font-size: large; margin-left: 1em; margin-right: 1em;"><a href="http://2.bp.blogspot.com/-ZduEga4cIGQ/UfaRP2WnWBI/AAAAAAAAAtc/n4cHogpTXss/s1600/Screen+Shot+2013-07-29+at+11.47.44+AM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="620" src="http://2.bp.blogspot.com/-ZduEga4cIGQ/UfaRP2WnWBI/AAAAAAAAAtc/n4cHogpTXss/s640/Screen+Shot+2013-07-29+at+11.47.44+AM.png" width="640" /></a></span></div><div class="separator" style="clear: both; text-align: center;"><span style="font-size: large;"><br /></span></div><div class="separator" style="clear: both; text-align: left;"><span style="font-size: large;">The transformation itself is fairly straight forward and it's all Javascript:</span></div><span style="font-size: large;"><br /></span> <span style="font-size: large;"><br /></span> <br /><pre class="brush:javascript;"> /* name of the table to template from */<br />var t_name = "table_template";<br />var p_name = "ctemplateID";<br /><br />template = model.getTableSet().getByName(t_name);<br />if(template!=null){<br />    tcolumns = template.getElements();<br />    tables = model.getTableSet().toArray();<br />    /* walk all tables in the model */<br />    for (var t = 0; t&lt;tables.length;t++){<br />       table = tables[t];<br />      // compare name ignoring the case<br />       if(!table.getName().equalsIgnoreCase(t_name)){<br />         for (var i = 0; i &lt; tcolumns.length; i++) {<br />            column = tcolumns[i];<br />            col = table.getColumnByProperty(p_name,column.getObjectID());<br />            if(col==null){<br />             col = table.createColumn();<br />            }<br />            column.copy(col);<br />            //set property after copy otherwise it'll be cleared<br />            col.setProperty(p_name,column.getObjectID());<br />            table.setDirty(true);<br />         }<br />     }<br />    }<br />}<br /><br /></pre><span style="font-size: large;"><br /></span> 