---
layout: post
title: APEX Listener 2.0 !
date: '2012-12-19T15:32:00.000-08:00'
author: Kris Rice
tags: 
modified_time: '2012-12-19T15:32:54.469-08:00'
thumbnail: http://1.bp.blogspot.com/-GH0GksSIYfw/UNJKfJUEHSI/AAAAAAAAAkQ/UaP5D7s8rVk/s72-c/Screen%2BShot%2B2012-12-19%2Bat%2B3.11.17%2BPM.png
blogger_id: tag:blogger.com,1999:blog-37621059.post-1361542340977885659
blogger_orig_url: http://krisrice.blogspot.com/2012/12/apex-listener-20.html
---

The Oracle APEX Listener 2.0 is officially out.  There's a TON of changes in this release. The first how you get it up and running.  For the standalone version, it's very simple to be up and running quickly. Simply type "java -jar apex.war" and follow the prompts.  This will get you up and running. &nbsp;The biggest changes are in the REST services and I'll blog more on that later.<br /><br />The command line has a options now.  <br /><pre class="brush: bash">$ java -jar apex.war help<br />java -jar apex.war <command></command> [Options] [Arguments]<br /><br />The following commands are available:<br /><br />               configdir         Set the value of the web.xml<br />                                 config.dir property<br /><br />               help              Describe the usage of this<br />                                 program or its commands<br /><br />               map-url           Map a URL pattern to the<br />                                 named database connection<br /><br />               migrate           Migrate a 1.x configuration<br />                                 to 2.x format<br /><br />               setup             Configure database connection<br /><br />               standalone        Launch Oracle Application<br />                                 Express Listener in<br />                                 standalone mode<br /><br />               static            Generate a Web Application<br />                                 Archive (WAR) to serve Oracle<br />                                 Application Express static<br />                                 resources<br /><br />               user              Create or update credentials<br />                                 for a user<br /><br />To see instructions on how to use each of these commands, type help<br />followed by the command name, for example<br /><br /> java -jar apex.war help configdir<br /><br />If no command is provided the Listener is started in standalone mode<br /></pre><br />The important one to not using the command line is the "user" command.  You can use sqldeveloper 3.2.2 to now administer the APEX Listener.  The user command lets you setup the authentication that sqldev will use to connect and administer in standalone mode.<br /><br /><pre>java -jar apex.war user klrice "Listener Administrator"<br /></pre><br />SQL Developer 3.2.2 is the current and required version to administer the listener. &nbsp;Use the View -&gt; APEX Listener menu and change anything.  Once the settings are done, use the test button in the tool bar to validate setting and finalize with the Upload Setting button.  Alternatively, you can save the setting to a zip file and manually put them in place.<br /><a href="http://1.bp.blogspot.com/-GH0GksSIYfw/UNJKfJUEHSI/AAAAAAAAAkQ/UaP5D7s8rVk/s1600/Screen%2BShot%2B2012-12-19%2Bat%2B3.11.17%2BPM.png" imageanchor="1"><img border="0" height="435" src="http://1.bp.blogspot.com/-GH0GksSIYfw/UNJKfJUEHSI/AAAAAAAAAkQ/UaP5D7s8rVk/s640/Screen%2BShot%2B2012-12-19%2Bat%2B3.11.17%2BPM.png" width="640" /></a><br /><br /><br /><h3>Java Script Validations?</h3>In the new listener there's an option for the normal PL/SQL Validations. &nbsp;Nothing has changed there however if you change the select box to javascript, you can now validate the request before hitting the database at all. &nbsp;This has the obvious advantage of no database hit, no connection borrowed from the pool, no extra load on the database to simply refuse some requests. &nbsp;The following are all available in javascript as variables.<br /><br /><pre class="brush: bash">HOST<br />PORT<br />REFERER<br />USER_AGENT<br />URI<br />QUERY_STRING<br />REMOTE_ADDR<br />REQUEST_METHOD<br />REQUEST_PROTOCOL<br />REQUEST_SCHEME<br />SCRIPT_NAME<br />SERVER_NAME<br />SERVER_PORT<br />SERVER_PROTOCOL<br /></pre><div class="p1"><span class="s1">Also all querystring params and headers are put in as variables with their names.&nbsp;</span></div><div class="p1"><span class="s1">The only requirement is that there be a function named "isValid" that returns the string "true" or "false". &nbsp;</span></div><br /><pre class="brush: js">function isValid(){ <br /> // no more ie6 <br />    if ( USER_AGENT.indexOf("MSIE 6") &gt; 0 ) {<br />        return "false";<br />     }<br /> // a procedure in the klrice schema named HI has been performing poorly so shut it off<br />   if ( SCRIPT_NAME == 'klrice.hi' ) { <br />       return "FALSE";<br />   }<br />  return "true";<br />}<br /></pre>