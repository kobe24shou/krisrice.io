---
layout: post
title: 'Demo App for REST enabled SQL '
date: '2017-09-14T13:34:00.000-07:00'
author: Kris Rice
tags: 
modified_time: '2017-09-14T13:34:02.322-07:00'
thumbnail: https://4.bp.blogspot.com/-AWA0ttVJsek/WbriBpuB6jI/AAAAAAAABTw/fN0mFoGuTbAhCPjCXkVA52dJ3lWtUTGHQCK4BGAYYCw/s72-c/Screen%2BShot%2B2017-09-14%2Bat%2B4.08.13%2BPM.png
blogger_id: tag:blogger.com,1999:blog-37621059.post-2145639054684888400
blogger_orig_url: http://krisrice.blogspot.com/2017/09/demo-app-for-rest-enabled-sql.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><br /><h2 style="text-align: left;">Getting Started</h2><div><br /></div><div>&nbsp;The new Oracle REST Data Services SQL over REST. &nbsp;How to enable that is on my last blog post here:&nbsp;http://krisrice.blogspot.com/2017/09/ords-173-beta-introducing-rest-enabled.html</div><div><br /></div><h2 style="text-align: left;">cURL Examples</h2><div>The simplest way to test this new feature out is with a curl command sending over the SQL.</div><div><br /></div><div><br /></div><div><pre style="brush: shell;">$ curl -X "POST" "http://localhost:9090/ords/hr/_/sql"  \<br />       -H "Content-Type: application/sql"               \<br />       -u HR:oracle                                     \<br />   -d $'<b><span style="font-size: large;">select * from dual;</span></b>' <br /></pre><br /></div><div><br />There are a number of other curl based examples now in the example github project :&nbsp;<a href="https://github.com/oracle/oracle-db-tools/tree/master/ords/rest-sql">https://github.com/oracle/oracle-db-tools/tree/master/ords/rest-sql</a>&nbsp;. The examples try to cover the various type of output that can be returned. &nbsp;This includes trying to use SPOOL which is a restricted command, &nbsp;DDL, a full sql script, a SQLcl command "DDL" and others.<br /><br /><br /><a href="http://4.bp.blogspot.com/-AWA0ttVJsek/WbriBpuB6jI/AAAAAAAABTw/fN0mFoGuTbAhCPjCXkVA52dJ3lWtUTGHQCK4BGAYYCw/s1600/Screen%2BShot%2B2017-09-14%2Bat%2B4.08.13%2BPM.png" imageanchor="1"><img border="0" height="500" src="https://4.bp.blogspot.com/-AWA0ttVJsek/WbriBpuB6jI/AAAAAAAABTw/fN0mFoGuTbAhCPjCXkVA52dJ3lWtUTGHQCK4BGAYYCw/s640/Screen%2BShot%2B2017-09-14%2Bat%2B4.08.13%2BPM.png" width="640" /></a><br /><br /><h2 style="text-align: left;">A better way</h2><br />cURL is great but a web page is much more dynamic to show off such features. &nbsp;Dermot who created this new feature created a demo page to show off many of the features as he showed off in this tweet ( hint follow him )&nbsp;</div><blockquote class="twitter-tweet" data-lang="en"><div dir="ltr" lang="en">A quick "how to get started" using REST Enabled SQL.<a href="https://t.co/kn0E1dpnRm">https://t.co/kn0E1dpnRm</a> <a href="https://t.co/pn2jJq4x3r">pic.twitter.com/pn2jJq4x3r</a></div>â€” Dermot ONeill (@dermotoneill) <a href="https://twitter.com/dermotoneill/status/905728512555962368">September 7, 2017</a></blockquote><script async="" charset="utf-8" src="//platform.twitter.com/widgets.js"></script><br />Starting from that example there a file in that same github folder.<br /><table class="files js-navigation-container js-active-navigation-container" data-pjax="" style="background: rgb(255, 255, 255); border-collapse: collapse; border-radius: 2px; border-spacing: 0px; box-sizing: border-box; color: #24292e; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 14px; width: 977.778px;"><tbody style="box-sizing: border-box;"><tr class="js-navigation-item navigation-focus" style="box-sizing: border-box;"><td class="content" style="background: rgb(246, 248, 250); border-top: 1px solid rgb(234, 236, 239); box-sizing: border-box; line-height: 20px; max-width: 180px; padding: 6px 3px;"><span class="css-truncate css-truncate-target" style="box-sizing: border-box; display: inline-block; max-width: 100%; overflow: hidden; text-overflow: ellipsis; vertical-align: top; white-space: nowrap;"><a class="js-navigation-open" href="https://github.com/oracle/oracle-db-tools/blob/master/ords/rest-sql/demo-all-in-one.html" id="7766077f763fa753a8ecdc3f8e39d67d-e48c1c6d1172e8861edf6cb0a0663f3ed7ef0dfe" style="background-color: transparent; box-sizing: border-box; color: #0366d6; text-decoration-line: none;" title="demo-all-in-one.html">demo-all-in-one.html</a></span></td></tr></tbody></table>This is a full test page now based in Oracle JET , ORDS and Code Mirror that can be placed on your ORDS server ( for CORS reasons ) and served up. &nbsp;There's a series of inputs on the left, output on the right hand side and finally some examples on the bottom of performing the call in cURL, JQuery , or SQLcl.<br /><br /><br /><div dir="ltr" style="text-align: left;" trbidi="on"><a href="http://2.bp.blogspot.com/-SalqX1u4zdU/WbrgMHTVr8I/AAAAAAAABTk/t8EW9_WhxcYAV_fEEbRSViJAqtBxkU-FACK4BGAYYCw/s1600/Screen%2BShot%2B2017-09-14%2Bat%2B4.01.38%2BPM.png" imageanchor="1"><img border="0" height="552" src="https://2.bp.blogspot.com/-SalqX1u4zdU/WbrgMHTVr8I/AAAAAAAABTk/t8EW9_WhxcYAV_fEEbRSViJAqtBxkU-FACK4BGAYYCw/s640/Screen%2BShot%2B2017-09-14%2Bat%2B4.01.38%2BPM.png" width="640" /></a><br /><br />The most useful thing in this demo page is the Examples drop list. &nbsp;There's everything from a trivial select from dual to doing POST of a fully form JSON document of the command to run such as a select with a bind of a VARRAY<br /><br /><br /><pre style="brush: json;">{<br />  "statementText": "SELECT ? as col_ARRAY FROM dual",<br />  "offset": 0,<br />  "limit": 5,<br />  "binds":[<br />{"index":1,"data_type":"VARRAY", "type_name":"ADHOC_VARRAY_NUMBER","value":[1,5,3]}<br />]<br />}<br /></pre><br /><br /><h2 style="text-align: left;">The Output</h2><br />The returning JSON can vary quite a lot depending on what is being sent. However the basic structure is quite simple. There is an array of "items" which is the statements processed.  The variance comes in depending on what is being sent.<br /><br />For a Query there will be a item[N].resultSet. &nbsp;This will then have a child of metadata which is the columns, datatypes, json scrubbed name, real name. Peered to this is another "items" which has an array of the rows from the select.<br /><br />For NON-Query there is an item[N].response which contains the text of what the command did.<br /><br />And it can get more complicated from there.<br /><br /><pre style="brush: json;">{<br />    "env": {<br />        "defaultTimeZone": "America/New_York"<br />    },<br />    "items": [<br />        {<br />            "statementId": 1,<br />            ....<br />        },<br />.....<br /><br /><br /></pre><br />Here's a short example and it's corresponding output:<br /><pre style="brush: sql;">spool a<br />select 1 from dual;<br />DESC dual;<br />begin<br /> null;<br />end;<br />/<br />spool off<br /><br /></pre><br /><br /><pre style="brush: json;">{<br />    "env": {<br />        "defaultTimeZone": "America/New_York"<br />    },<br />    "items": [<br />        {<br />            "statementId": 1,<br />            "statementType": "sqlplus",<br />            "statementPos": {<br />                "startLine": 1,<br />                "endLine": 1<br />            },<br />            "statementText": "spool a",<br />            "response": [<br />                "SP2-0738: Restricted command: \n\"spool a\"\nnot available",<br />                "\n"<br />            ],<br />            "result": 0<br />        },<br />        {<br />            "statementId": 2,<br />            "statementType": "query",<br />            "statementPos": {<br />                "startLine": 2,<br />                "endLine": 2<br />            },<br />            "statementText": "select 1 from dual",<br />            "response": [],<br />            "result": 0,<br />            "resultSet": {<br />                "metadata": [<br />                    {<br />                        "columnName": "1",<br />                        "jsonColumnName": "1",<br />                        "columnTypeName": "NUMBER",<br />                        "precision": 0,<br />                        "scale": -127,<br />                        "isNullable": 1<br />                    }<br />                ],<br />                "items": [<br />                    {<br />                        "1": 1<br />                    }<br />                ],<br />                "hasMore": false,<br />                "limit": 1500,<br />                "offset": 0,<br />                "count": 1<br />            }<br />        },<br />        {<br />            "statementId": 3,<br />            "statementType": "sqlplus",<br />            "statementPos": {<br />                "startLine": 3,<br />                "endLine": 3<br />            },<br />            "statementText": "DESC dual",<br />            "response": [<br />                "Name  Null? Type        \n----- ----- ----------- \nDUMMY       VARCHAR2(1) \n"<br />            ],<br />            "result": 0<br />        },<br />        {<br />            "statementId": 4,<br />            "statementType": "plsql",<br />            "statementPos": {<br />                "startLine": 4,<br />                "endLine": 7<br />            },<br />            "statementText": "begin\n null;\nend;",<br />            "response": [<br />                "\nPL/SQL procedure successfully completed.\n\n"<br />            ],<br />            "result": 0<br />        },<br />        {<br />            "statementId": 5,<br />            "statementType": "sqlplus",<br />            "statementPos": {<br />                "startLine": 8,<br />                "endLine": 8<br />            },<br />            "statementText": "spool off",<br />            "response": [<br />                "SP2-0738: Restricted command: \n\"spool off\"\nnot available",<br />                "\n"<br />            ],<br />            "result": 0<br />        }<br />    ]<br />}<br /></pre></div></div>