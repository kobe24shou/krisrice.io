---
layout: post
title: Apex Listener jdbc/security setup
date: '2012-05-14T01:00:00.000-07:00'
author: Kris Rice
tags:
- ords
modified_time: '2015-07-14T08:47:52.515-07:00'
blogger_id: tag:blogger.com,1999:blog-37621059.post-6289371157641481741
blogger_orig_url: http://krisrice.blogspot.com/2012/05/apex-listener-jdbcsecurity-setup.html
---

<br />In talking to a few customers, I realized lots of people run with the default settings. So, I thought I should point out a few things that should be&nbsp;conscious&nbsp;decisions vs. accept the defaults. &nbsp;The defaults are some limits that are safe and will run a modest size app just fine. &nbsp;When the app gets a few long running spots or &nbsp;high concurrency it's time to look at changing those defaults.<br /><br />1. &nbsp;There are fewer and fewer reasons to use the OCI jdbc driver over thin but it is something that if there's a reason you can swap out.<br /><br />&lt;entry key="apex.jdbc.DriverType"&gt;thin&lt;/entry&gt;<br /><br />2. The pool of connections has a few things that can be adjusted.<br />a) &nbsp;The initial size of the pool. &nbsp;This is when you first start up the listener how many connections to establish so that user #1,2,3 will not be waiting on a new connection to be established.<br />&lt;entry key="apex.jdbc.InitialLimit"&gt;3&lt;/entry&gt;<br /><br />b) The min is how low the pool is allowed. &nbsp;If things like&nbsp;inactivity&nbsp;is set to idle down the connection this many will stay&nbsp;available.<br />&lt;entry key="apex.jdbc.MinLimit"&gt;1&lt;/entry&gt;<br /><br />c) The max is what it sounds like the most connections that will be allowed. &nbsp;For a system with high&nbsp;concurrent&nbsp;or some long running pages this will need to be increased. &nbsp;The effect if not is that user #11 ( when set to 10 ) will be watching a browser spin. &nbsp;Then the training we all have that the web is fast kicks in, the user cancels the page, and requests again thinking something was wrong and surly it'll be faster the next time. &nbsp;That causes the next request. &nbsp;Pretty soon there's a lot of queue requests waiting. &nbsp;That all turns into phone calls/ emails to the sys admin , dba , and developers that the app is slow or broken.<br />&nbsp; &nbsp; Talking to one user, he upped this to 100 and it made a huge difference no more queuing. &nbsp;Another had to go well over 100 due to a combination of slow queries and high concurrency. &nbsp;There's not 1 setting that covers everything.<br /><br />&lt;entry key="apex.jdbc.MaxLimit"&gt;<b>10</b>&lt;/entry&gt;<br /><br />d) InactivityTimeout will idle the connection pool back down to the minLimit over time as the connections are idle for the value provided.<br />&lt;entry key="apex.jdbc.InactivityTimeout"&gt;1800&lt;/entry&gt;<br /><br />e) This one covers in case the connection gets lost due to anything at all. &nbsp;If the connection pool doesn't get the connection back for some reason for this amount of time and is idle for this time, it will be reclaimed automatically<br />&lt;entry key="apex.jdbc.AbandonedConnectionTimeout"&gt;900&lt;/entry&gt;<br /><br />f) Lastly for jdbc, this is how many request a connection will service before it is closed and new one opened.<br />&lt;entry key="apex.jdbc.MaxConnectionReuseCount"&gt;50000&lt;/entry&gt;<br /><br /><br />3) For an APEX install, the security function should always be set. This blocks non-apex procedures. &nbsp;These could be procedures that happen to be granted to public by accident or intentionally.<br /><br /><br />&lt;entry key="apex.security.requestValidationFunction"&gt;<span style="background-color: white; color: #444444; font-size: 14px; line-height: 18px;"><b>wwv_flow_epg_include_modules.authorize</b></span>&lt;/entry&gt;<br /><div><br /></div><br />