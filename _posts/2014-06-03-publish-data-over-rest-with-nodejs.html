---
layout: post
title: 'Publish data over REST with Node.js '
date: '2014-06-03T08:07:00.000-07:00'
author: Kris Rice
tags:
- ords
modified_time: '2015-07-14T08:47:52.497-07:00'
thumbnail: http://1.bp.blogspot.com/-zdrmY0dxFcU/U43jK_s_7YI/AAAAAAAAA0g/lAQi_YJfwrg/s72-c/Screen+Shot+2014-06-03+at+11.00.24.png
blogger_id: tag:blogger.com,1999:blog-37621059.post-443326150246302247
blogger_orig_url: http://krisrice.blogspot.com/2014/06/publish-data-over-rest-with-nodejs.html
---

Of course the best way to expose database data over REST is with <a href="http://www.oracle.com/technetwork/developer-tools/rest-data-services/overview/index.html">Oracle REST Data Services</a>. &nbsp;If you haven't read over the <a href="http://www.oracle.com/technetwork/developer-tools/rest-data-services/overview/ordsv3sod-2186242.pdf">Statement of Direction</a>, it's worth the couple minutes it takes. &nbsp;The auto table enablement and filtering is quite nice. <br /><br />For anyone interested in node.js and oracle, this is a very quick example of publishing the emp table over REST for use by anyone that would prefer REST over sql*net. &nbsp;For example from javascript,php,perl,...<br /><br /><br /><br />The current best driver for node.js to access oracle is node-oracle which is found here: <a href="https://github.com/joeferner/node-oracle">https://github.com/joeferner/node-oracle</a><br /><br /><br />Here's a short set of steps to get going.<br /><br />1. Install node,&nbsp;http://nodejs.org/download/<br /><br />2. Setup the environment's oracle variables<br /><br /><pre class="brush:bash;">export PATH=$PATH:.  <br />export ORACLE_HOME=/path/to/my/oracle/product/11.2.0/dbhome_1<br />export OCI_LIB_DIR=$ORACLE_HOME/lib<br />export OCI_INCLUDE_DIR=$ORACLE_HOME/rdbms/public<br />export OCI_VERSION=11 #Integer. Optional, defaults to '11'<br />export NLS_LANG=.UTF8 # Optional, but required to support international characters<br />export LD_LIBRARY_PATH=$ORACLE_HOME/lib<br /><br /></pre>3. run&nbsp;<span style="background-color: #f8f8f8; color: #333333; font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; line-height: 20.399999618530273px;">npm install oracle</span><br /><br />That's all there is to getting then env setup for oracle. &nbsp;The other node package I use in this example is express. <br /><br />4. To install that just type: &nbsp;<span style="background-color: #f8f8f8; color: #333333; font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; line-height: 20.399999618530273px;">npm install express</span>  To learn more about express, it's home is here&nbsp;<a href="http://expressjs.com/">http://expressjs.com/</a><br /><br /><br /><br /><pre class="brush:js;">var express = require('express');<br />var app = express();<br />// This make a uri end point for the REST call<br />// http://myhost/emp will return the data<br />app.get('/emp', function(req, res){<br />  empList(req,res)<br />  }<br />);<br /><br />var oracle = require('oracle');<br />var conn;<br /><br />var connectData = {<br />    hostname: "127.0.0.1",<br />    port: 1521,<br />    database: "XE", <br />    user: "klrice",<br />    password: "fortim"<br />}<br /><br />// connect<br />//var conn="";<br />oracle.connect(connectData, function(err, connection) {<br />    if (err) { console.log("Error connecting to db:", err); return; }<br />    console.log('connected');<br />    conn =connection;<br />});<br /><br />// function registered in the /emp declaration<br />function empList(req,res){<br />     var empList = "select * from emp ";<br />    conn.execute(empList, [], function(err, results) {<br />            if (err) { console.log("Error executing query:", err); return; }<br /><br />            // use the JSON function to format the results and print<br />            res.write(JSON.stringify(results));<br />            res.end();<br />    });<br />}<br /><br />// listen on port 8000<br />app.listen(8000);<br /><br /></pre><br /><br />The result is that the node script is listening on port 8000 for /emp and will return this JSON.<br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-zdrmY0dxFcU/U43jK_s_7YI/AAAAAAAAA0g/lAQi_YJfwrg/s1600/Screen+Shot+2014-06-03+at+11.00.24.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-zdrmY0dxFcU/U43jK_s_7YI/AAAAAAAAA0g/lAQi_YJfwrg/s1600/Screen+Shot+2014-06-03+at+11.00.24.png" /></a></div><br /><br /><br /><br /><br /><br /><br />