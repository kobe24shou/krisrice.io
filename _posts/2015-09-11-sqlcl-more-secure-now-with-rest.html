---
layout: post
title: SQLCL - More secure, now with REST !
date: '2015-09-11T13:30:00.001-07:00'
author: Kris Rice
tags:
- sqlcl
modified_time: '2016-06-10T13:03:58.820-07:00'
blogger_id: tag:blogger.com,1999:blog-37621059.post-3951909486609231472
blogger_orig_url: http://krisrice.blogspot.com/2015/09/sqlcl-more-secure-now-with-rest.html
---

A new SQLCL build was just <a href="http://www.oracle.com/technetwork/developer-tools/sql-developer/downloads/index.html">posted</a>&nbsp;go grab it and kick the tires. &nbsp;There are well over 100 bug fixes in there so it's better than ever. &nbsp;Also there's some new things.<br /><br /><br /><h4>More Secure&nbsp;</h4><br />&nbsp; Imagine you have an api that is called and a password or something is used in the parameters. &nbsp;We use exec MY_API(...) &nbsp;and it works just fine. &nbsp;However consider if someone with access to v$sql they just got anything you passed into the api and quite easily. &nbsp;Enter SQLCL new thing #1 starting with this build now changes all "exec my_api(...)" into an anonymous block with binds so those literals do not show up.<br /><br /><br /><br /><pre class="brush: sql;">Procedure SECURE_API compiled<br /><br />KLRICE@orcl &gt;exec secure_api('my password');<br /><br /><br />PL/SQL procedure successfully completed.<br /><br />KLRICE@orcl &gt;select sql_text from v$sql where sql_text like '%secure_api%';<br /><br /><br />SQL_TEXT                                                       <br /><b>BEGIN secure_api(:ZSqlDevUnIq1); END; </b>                         <br />select sql_text from v$sql where sql_text like '%secure_api%'  <br /><br /><br />KLRICE@orcl &gt;<br /><br /></pre><br /><br /><br /><h4>REST Support</h4>Always check the help, the tool highlights what is new to make it easy. &nbsp;It only took Alex 8 minutes from the download being available to seeing the new features !<br /><br /><blockquote class="twitter-tweet" lang="en"><div dir="ltr" lang="en"><a href="https://twitter.com/krisrice">@krisrice</a> help REST : REST allows to export ORDS 3.X services.</div>â€” Alex Zaballa (@alexzaballa) <a href="https://twitter.com/alexzaballa/status/642398454493380612">September 11, 2015</a></blockquote><script async="" charset="utf-8" src="//platform.twitter.com/widgets.js"></script><br /><br />&nbsp;This build adds the ability to extract ORDS services. &nbsp;Once a rest service is defined and it's time to move it from one system to another this will make it easier than ever. &nbsp;Simple spool to a file, export the definition and instant install script.<br /><br /><pre class="brush: sql;">KLRICE@orcl &gt;help<br />    ....<br />    REST<br />    ...<br />KLRICE@orcl &gt;rest<br /><br />REST<br />------<br /><br />REST allows to export ORDS 3.X services.<br /><br />      REST export                     -  All modules<br />      REST export &gt;module_name&gt;    -  Export a specific module<br />      REST export &gt;module_prefix&gt;  -  Export a specific module related to the given prefix<br />      REST modules                    -  List the available modules<br />      REST privileges                 -  List the existing privileges<br />      REST schemas                    -  List the available schemas<br />KLRICE@orcl &gt;rest modules<br /><br />NAME   PREFIX  STATUS     ITEMS_PER_PAGE  <br />demos  demos/  PUBLISHED  25              <br />hr     hr      PUBLISHED  25              <br /><br /><br />KLRICE@orcl &gt;rest export hr<br /><br />declare<br />  l_module_id number;<br />  l_template_id number;<br />  l_handler_id number;<br />begin<br /><br />  l_module_id := ORDS_METADATA.ORDS_SERVICES.create_module( p_name =&gt; 'hr' , p_uri_prefix =&gt; 'hr' , p_items_per_page =&gt; 25 , p_status =&gt; 'PUBLISHED' );<br />  l_template_id := ORDS_METADATA.ORDS_SERVICES.add_template( p_module_id =&gt; l_module_id, p_uri_template =&gt; 'everything' , p_priority =&gt; 0 , p_etag_type =&gt; 'HASH' );<br />  l_handler_id := ORDS_METADATA.ORDS_SERVICES.add_handler( p_template_id =&gt; l_template_id, p_source_type =&gt; 'json/query' , p_method =&gt; 'GET' , p_items_per_page =&gt; 0 , p_source =&gt; 'select d.*,' || unistr('\000a')<br />   || '' || unistr('\000a')<br />   || '   cursor( select e.*' || unistr('\000a')<br />   || '           from hr.employees e where e.department_id = d.department_id) emps           ' || unistr('\000a')<br />   || '   from hr.departments d');<br /><br />commit;<br />end;<br />KLRICE@orcl &gt;</pre>