---
layout: post
title: Oracle REST Data Services and Docker
date: '2017-06-01T05:49:00.000-07:00'
author: Kris Rice
tags: 
modified_time: '2017-08-04T09:53:24.440-07:00'
thumbnail: https://3.bp.blogspot.com/-1wCjlNGMY-U/WTAJRqFeceI/AAAAAAAABQA/_IZudfXvS4UgeeztbRGkEnR_6kh9kIHSgCK4B/s72-c/Screen%2BShot%2B2017-06-01%2Bat%2B8.30.36%2BAM.png
blogger_id: tag:blogger.com,1999:blog-37621059.post-2084061909244191320
blogger_orig_url: http://krisrice.blogspot.com/2017/06/oracle-rest-data-services-and-docker.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" style="text-align: left;" trbidi="on"><h2 style="text-align: left;">TL;DR</h2><br />1) check out&nbsp;https://github.com/krisrice/docker-ords-sqlcl-apex<br />2) Download ORDS , SQLcl; optionally APEX<br />3) Build w/DB connection details<br /><pre class="brush:bash;">docker build -t krisrice/ords:3.0.10  --build-arg DBHOST=192.168.3.119 --build-arg DBSERVICE=orcl --build-arg DBPORT=1521 --build-arg DBPASSWD=oracle  .<br /></pre>4) Run the image<br /><pre class="brush:bash;">docker run -d -p 8888:8888 -p 8443:8443 --name=ords krisrice/ords:3.0.10<br /></pre>5) Access https://localhost:8433/ords/apex</div><br /><br /><h2 style="text-align: left;">GitHub Project</h2><div style="text-align: left;">I started a <a href="https://github.com/krisrice/docker-ords-sqlcl-apex">spot</a> in github for me to adjust a docker build as I need it. &nbsp;There will be an official Oracle one published along side all the existing ones that <a class="twitter-mention-button" data-show-count="false" href="https://twitter.com/intent/tweet?screen_name=GeraldVenzl">Tweet to @GeraldVenzl</a><script async="" charset="utf-8" src="//platform.twitter.com/widgets.js"></script> has out on <a href="https://github.com/oracle/docker-images%C2%A0">https://github.com/oracle/docker-images&nbsp;</a></div><div style="text-align: left;"><br /></div><div style="text-align: left;">This is where I'll be learning what ords needs out of a docker.&nbsp;<a href="https://github.com/krisrice/docker-ords-sqlcl-apex">&nbsp;https://github.com/krisrice/docker-ords-sqlcl-apex</a></div><div style="text-align: left;"><br /></div><div style="text-align: left;"><h2 style="text-align: left;">The Build Structure</h2>This docker is using the docker build arguments for passing in any information needed such as the db connect details to install ORDS and APEX. These are passed one by one with the --build-args X=Y. The initial ones include:<br /><pre style="background-color: #f6f8fa; border-radius: 3px; box-sizing: border-box; color: #24292e; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; overflow: auto; padding: 16px; word-wrap: normal;"><code style="background: transparent; border-radius: 3px; border: 0px; box-sizing: border-box; display: inline; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; line-height: inherit; margin: 0px; overflow: visible; padding: 0px; word-break: normal; word-wrap: normal;">DBHOST    : IP Address of the database host<br />DBSERVICE : DB Service name to connect<br />DBPORT    : DB Port to connect<br />DBPASSWD  : SYS password<br /></code></pre><div style="box-sizing: border-box; color: #24292e; font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; margin-bottom: 16px;">Optional</div><pre style="background-color: #f6f8fa; border-radius: 3px; box-sizing: border-box; color: #24292e; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; font-stretch: normal; line-height: 1.45; margin-bottom: 16px; overflow: auto; padding: 16px; word-wrap: normal;"><code style="background: transparent; border-radius: 3px; border: 0px; box-sizing: border-box; display: inline; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; line-height: inherit; margin: 0px; overflow: visible; padding: 0px; word-break: normal; word-wrap: normal;">PORT  : HTTP Port for ORDS (Default: 8888)<br />SPORT : HTTPS Port for ORDS (Default: 8443)<br />APEXI : path to the apex images folder INSIDE the doc</code></pre>These will expand to allow things like custom SSL cert loading, migrate apex REST -&gt; ords REST, conn pool sizes,.... So best to check on the README in the project as I'll keep that up to date.<br /><br />The build process itself is a fairly easy to follow bash script. There are a couple notable things in the build ( <a href="https://github.com/krisrice/docker-ords-sqlcl-apex/blob/master/setupOrds.sh">setupOrds.sh</a> )<br /><br /><ol style="text-align: left;"><li>It randomizes the passwords for the ORDS DB accounts used. It does the alter db user then burns the passwords into the ORDS configuration.</li><li>It creates a docroot for serving up any files located at /opt/oracle/ords/doc_root</li></ol><br /><h2 style="text-align: left;">Optional Software</h2><div>IF APEX is downloaded, it will install/upgrade the target database. This installs APEX, setups the APEX REST config, and sets the /i/ to the /opt/oracle/apex/images folder so it's ready to go.</div><div><br /></div>IF SQLcl is download, it is installed into the image<br /><a href="http://3.bp.blogspot.com/-1wCjlNGMY-U/WTAJRqFeceI/AAAAAAAABQA/_IZudfXvS4UgeeztbRGkEnR_6kh9kIHSgCK4B/s1600/Screen%2BShot%2B2017-06-01%2Bat%2B8.30.36%2BAM.png" imageanchor="1"><img border="0" src="https://3.bp.blogspot.com/-1wCjlNGMY-U/WTAJRqFeceI/AAAAAAAABQA/_IZudfXvS4UgeeztbRGkEnR_6kh9kIHSgCK4B/s1600/Screen%2BShot%2B2017-06-01%2Bat%2B8.30.36%2BAM.png" /></a><br /><br /><br /><h2 style="text-align: left;">Running the Image</h2><div>There's a couple gotchas I've found running the image.<br /><br /><ol style="text-align: left;"><li>Could be my setup but the EXPOSE option in the Dockerfile doesn't work for me to have the ORDS on localhost:8888. &nbsp;This means the -p flag is needed to expose the port inside the docker image to the host machine.</li><li>To run the image in the background simply give a -d&nbsp;</li><li>To get the logs of the image running in the background docker has a nice docker logs &lt;container name&gt; The trouble is the container name is randomly generated unless the --name=&lt;NAME&gt; is used.</li></ol>This is how I start the image.<br /><br /><pre class="brush:bash;">docker run -d -p 8888:8888 -p 8443:8443 --name=ords krisrice/ords:3.0.10<br /></pre></div><br /></div></div><br /><br /><h2 style="text-align: left;">The build</h2><div>IF the APEX is part of the build and is installing/updating, it will take longer than this. &nbsp;Here's about 1 minute from nothing to up and running with ORDS and APEX in this docker image.</div><br /><br /></div><br /><script async="" id="asciicast-122916" src="https://asciinema.org/a/122916.js" type="text/javascript"></script><br /></div>